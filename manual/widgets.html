<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Widgets &#8212; Urwid 2.6.0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=1f4f2616" />
    
    <script src="../_static/documentation_options.js?v=ae39cb24"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="canonical" href="https://urwid.org/manual/widgets.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User Input" href="userinput.html" />
    <link rel="prev" title="Display Modules" href="displaymodules.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="userinput.html" title="User Input"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="displaymodules.html" title="Display Modules"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Urwid 2.6.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Urwid Manual</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Widgets</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="widgets">
<h1>Widgets<a class="headerlink" href="#widgets" title="Link to this heading">¶</a></h1>
<section id="widget-layout">
<span id="id1"></span><h2>Widget Layout<a class="headerlink" href="#widget-layout" title="Link to this heading">¶</a></h2>
<p>Urwid uses widgets to divide up the available screen space. This makes it easy
to create a fluid interface that moves and changes with the user’s terminal and
font size.</p>
<img alt="../_images/widget_layout.png" src="../_images/widget_layout.png" />
<p>The result of rendering a widget is a canvas suitable for displaying on the
screen. When we render the topmost widget:</p>
<ol class="arabic simple">
<li><p>The topmost widget <em>(a)</em> is rendered the full size of the screen</p></li>
<li><p><em>(a)</em> renders <em>(b)</em> any size up to the full size of the screen</p></li>
<li><p><em>(b)</em> renders <em>(c)</em>, <em>(d)</em> and <em>(e)</em> dividing its available screen columns
between them</p></li>
<li><p><em>(e)</em> renders <em>(f)</em> and <em>(g)</em> dividing its available screen rows between
them</p></li>
<li><p><em>(e)</em> combines the canvases from <em>(f)</em> and <em>(g)</em> and returns them</p></li>
<li><p><em>(b)</em> combines the canvases from <em>(c)</em>, <em>(d)</em> and <em>(e)</em> and returns them</p></li>
<li><p><em>(a)</em> possibly modifies the canvas from <em>(b)</em> and returns it</p></li>
</ol>
<p>Widgets <em>(a)</em>, <em>(b)</em> and <em>(e)</em> are called container widgets because they
contain other widgets. Container widgets choose the size and position of their
contained widgets.</p>
<p>Container widgets must also keep track of which one of their contained widgets
is in focus. The focus is used when handling keyboard input. If in the above
example <em>(b)</em> ‘s focus widget is <em>(e)</em> and <em>(e)</em> ‘s focus widget is
<em>(f)</em> then keyboard input will be handled this way:</p>
<ol class="arabic simple">
<li><p>The keypress is passed to the topmost widget <em>(a)</em></p></li>
<li><p><em>(a)</em> passes the keypress to <em>(b)</em></p></li>
<li><p><em>(b)</em> passes the keypress to <em>(e)</em>, its focus widget</p></li>
<li><p><em>(e)</em> passes the keypress to <em>(f)</em>, its focus widget</p></li>
<li><p><em>(f)</em> either handles the keypress or returns it</p></li>
<li><p><em>(e)</em> has an opportunity to handle the keypress if it was returned from
<em>(f)</em></p></li>
<li><p><em>(b)</em> has an opportunity to handle the keypress if it was returned from
<em>(e)</em></p></li>
<li><p><em>(a)</em> has an opportunity to handle the keypress if it was returned from
<em>(b)</em></p></li>
</ol>
</section>
<section id="box-flow-and-fixed-widgets">
<h2>Box, Flow and Fixed Widgets<a class="headerlink" href="#box-flow-and-fixed-widgets" title="Link to this heading">¶</a></h2>
<p>The size of a widget is measured in screen columns and rows. Widgets that are
given an exact number of screen columns and rows are called box widgets. The
topmost widget is always a box widget.</p>
<p>Much of the information displayed in a console user interface is text and the
best way to display text is to have it flow from one screen row to the next.
Widgets like this that require a variable number of screen rows are called flow
widgets. Flow widgets are given a number of screen columns and can calculate
how many screen rows they need.</p>
<p>Occasionally it is also useful to have a widget that knows how many screen
columns and rows it requires, regardless of the space available. This is
called a fixed widget.</p>
<table class="docutils align-default" id="id7">
<caption><span class="caption-text">How a Widget’s Size is Determined</span><a class="headerlink" href="#id7" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 40.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>sizing mode</p></th>
<th class="head"><p>width</p></th>
<th class="head"><p>height</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'box'</span></code></p></td>
<td><p>container decides</p></td>
<td><p>container decides</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'flow'</span></code></p></td>
<td><p>container decides</p></td>
<td><p>widget’s <a class="reference internal" href="../reference/widget.html#urwid.Widget.rows" title="urwid.Widget.rows"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rows()</span></code></a> method</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'fixed'</span></code></p></td>
<td><p>widget’s <a class="reference internal" href="../reference/widget.html#urwid.Widget.pack" title="urwid.Widget.pack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pack()</span></code></a> method</p></td>
<td><p>widget’s <a class="reference internal" href="../reference/widget.html#urwid.Widget.pack" title="urwid.Widget.pack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pack()</span></code></a> method</p></td>
</tr>
</tbody>
</table>
<p>It is an Urwid convention to use the variables <code class="xref py py-attr docutils literal notranslate"><span class="pre">maxcol</span></code> and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">maxrow</span></code> to store a widget’s size. Box widgets require both of <code class="docutils literal notranslate"><span class="pre">(maxcol,</span>
<span class="pre">maxrow)</span></code> to be specified.</p>
<p>Flow widgets expect a single-element tuple <code class="docutils literal notranslate"><span class="pre">(maxcol,)</span></code> instead because they
calculate their <code class="xref py py-attr docutils literal notranslate"><span class="pre">maxrow</span></code> based on the <code class="xref py py-attr docutils literal notranslate"><span class="pre">maxcol</span></code> value.</p>
<p>Fixed widgets expect the value <code class="docutils literal notranslate"><span class="pre">()</span></code> to be passed in to functions that take
a size because they know their <code class="xref py py-attr docutils literal notranslate"><span class="pre">maxcol</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">maxrow</span></code> values.</p>
</section>
<section id="included-widgets">
<span id="basic-grafic-widgets"></span><h2>Included Widgets<a class="headerlink" href="#included-widgets" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="../reference/widget.html#widget-classes"><span class="std std-ref">Widget class reference</span></a></p>
<img alt="../_images/urwid_widgets_1.png" src="../_images/urwid_widgets_1.png" />
<p>Basic and graphic widgets are the content with which users interact. They may
also be used as part of custom widgets you create.</p>
<img alt="../_images/urwid_widgets_2.png" src="../_images/urwid_widgets_2.png" />
</section>
<section id="decoration-widgets">
<span id="id2"></span><h2>Decoration Widgets<a class="headerlink" href="#decoration-widgets" title="Link to this heading">¶</a></h2>
<p>Decoration widgets alter the appearance or position of a single other widget.
The widget they wrap is available as the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">original_widget</span></code> property.
If you might be using more than one decoration widget you may use the
<a class="reference internal" href="../reference/widget.html#urwid.WidgetDecoration.base_widget" title="urwid.WidgetDecoration.base_widget"><code class="xref py py-attr docutils literal notranslate"><span class="pre">base_widget</span></code></a> property to access the
“most” original_widget.
<a class="reference internal" href="../reference/widget.html#urwid.Widget.base_widget" title="urwid.Widget.base_widget"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Widget.base_widget</span></code></a> points to <code class="docutils literal notranslate"><span class="pre">self</span></code> on all non-decoration widgets, so
it is safe to use in any situation.</p>
</section>
<section id="container-widgets">
<span id="id3"></span><h2>Container Widgets<a class="headerlink" href="#container-widgets" title="Link to this heading">¶</a></h2>
<p>Container widgets divide their available space between their child widgets.
This is how widget layouts are defined. When handling selectable widgets
container widgets also keep track of which of their child widgets is in focus.
Container widgets may be nested, so the actual widget in focus may be many
levels below the topmost widget.</p>
<p>Urwid’s container widgets have a common API you can use, regardless of the
container type.  Backwards compatibility is still maintained for the old
container-specific ways of accessing and modifying contents, but this API
is now the preferred way of modifying and traversing containers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">focus</span>
</pre></div>
</div>
<p>is a read-only property that returns the widget in focus for this container.
Empty containers and non-container widgets (that inherit from Widget)
return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">focus_position</span>
</pre></div>
</div>
<p>is a read/write property that provides access to the position of the
container’s widget in focus.  This will often be an integer value but may be
any object.
<a class="reference internal" href="../reference/widget.html#urwid.Columns" title="urwid.Columns"><code class="xref py py-class docutils literal notranslate"><span class="pre">Columns</span></code></a>, <a class="reference internal" href="../reference/widget.html#urwid.Pile" title="urwid.Pile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pile</span></code></a>, <a class="reference internal" href="../reference/widget.html#urwid.GridFlow" title="urwid.GridFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">GridFlow</span></code></a>, <a class="reference internal" href="../reference/widget.html#urwid.Overlay" title="urwid.Overlay"><code class="xref py py-class docutils literal notranslate"><span class="pre">Overlay</span></code></a> and
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> with a <a class="reference internal" href="../reference/list_walkers.html#urwid.SimpleListWalker" title="urwid.SimpleListWalker"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleListWalker</span></code></a> or <a class="reference internal" href="../reference/list_walkers.html#urwid.SimpleFocusListWalker" title="urwid.SimpleFocusListWalker"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleFocusListWalker</span></code></a>
as its body use integer positions.  <a class="reference internal" href="../reference/widget.html#urwid.Frame" title="urwid.Frame"><code class="xref py py-class docutils literal notranslate"><span class="pre">Frame</span></code></a> uses <code class="docutils literal notranslate"><span class="pre">'body'</span></code>, <code class="docutils literal notranslate"><span class="pre">'header'</span></code>
and <code class="docutils literal notranslate"><span class="pre">'footer'</span></code>;  <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> with a custom list walker will use the
positions the list walker returns.</p>
<p>Reading this value on an empty container or on any non-container widgets
(that inherit from Widget) raises an IndexError.  Writing to this property with
an invalid position will also raise an IndexError.  Writing a new value
automatically marks this widget to be redrawn and will be reflected in
<code class="docutils literal notranslate"><span class="pre">container.focus</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">contents</span>
</pre></div>
</div>
<p>is a read-only property (read/write in some cases) that provides access to a
mapping- or list-like object that contains the child widgets and the options
used for displaying those widgets in this container.  The mapping- or list-like
object always allows reading from positions with the usual <code class="docutils literal notranslate"><span class="pre">__getitem__()</span></code>
method and may support assignment and deletion with <code class="docutils literal notranslate"><span class="pre">__setitem__()</span></code> and
<code class="docutils literal notranslate"><span class="pre">__delitem__()</span></code> methods.  The values are <code class="docutils literal notranslate"><span class="pre">(child</span> <span class="pre">widget,</span> <span class="pre">option)</span></code> tuples.
When this object or its contents are modified the widget is automatically
flagged to be redrawn.</p>
<p><a class="reference internal" href="../reference/widget.html#urwid.Columns" title="urwid.Columns"><code class="xref py py-class docutils literal notranslate"><span class="pre">Columns</span></code></a>, <a class="reference internal" href="../reference/widget.html#urwid.Pile" title="urwid.Pile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pile</span></code></a> and <a class="reference internal" href="../reference/widget.html#urwid.GridFlow" title="urwid.GridFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">GridFlow</span></code></a> allow assigning an
iterable to <code class="docutils literal notranslate"><span class="pre">container.contents</span></code> to overwrite the values in
with the ones provided.</p>
<p><a class="reference internal" href="../reference/widget.html#urwid.Columns" title="urwid.Columns"><code class="xref py py-class docutils literal notranslate"><span class="pre">Columns</span></code></a>, <a class="reference internal" href="../reference/widget.html#urwid.Pile" title="urwid.Pile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pile</span></code></a>, <a class="reference internal" href="../reference/widget.html#urwid.GridFlow" title="urwid.GridFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">GridFlow</span></code></a>, <a class="reference internal" href="../reference/widget.html#urwid.Overlay" title="urwid.Overlay"><code class="xref py py-class docutils literal notranslate"><span class="pre">Overlay</span></code></a> and
<a class="reference internal" href="../reference/widget.html#urwid.Frame" title="urwid.Frame"><code class="xref py py-class docutils literal notranslate"><span class="pre">Frame</span></code></a> support <code class="docutils literal notranslate"><span class="pre">container.contents</span></code> item assignment and deletion.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>is a method that returns options objects for use in items added to
<code class="docutils literal notranslate"><span class="pre">container.contents</span></code>.  The arguments are specific to the container type,
and generally match the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> arguments for the container.
The objects returned are currently tuples of strings and integers or <code class="docutils literal notranslate"><span class="pre">None</span></code>
for containers without child widget options.  This method exists to allow
future versions of Urwid to add new options to existing containers.  Code
that expects the option tuples to remain the same size will fail when new
options are added, so defensive programming with options tuples is strongly
encouraged.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># a.k.a.</span>
<span class="n">container</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
</pre></div>
</div>
<p>is a short-cut method behaving identically to:
<code class="docutils literal notranslate"><span class="pre">container.contents[x][0].base_widget</span></code>.
Which means roughly “give me the child widget at position <em>x</em> and skip all
the decoration widgets wrapping it”.  Decoration widgets include
<a class="reference internal" href="../reference/widget.html#urwid.Padding" title="urwid.Padding"><code class="xref py py-class docutils literal notranslate"><span class="pre">Padding</span></code></a>, <a class="reference internal" href="../reference/widget.html#urwid.Filler" title="urwid.Filler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filler</span></code></a>, <a class="reference internal" href="../reference/widget.html#urwid.AttrMap" title="urwid.AttrMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttrMap</span></code></a> etc.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">get_focus_path</span><span class="p">()</span>
</pre></div>
</div>
<p>is a method that returns the focus position for this container <em>and</em> all child
containers along the path defined by their focus settings.  This list of
positions is the closest thing we have to the singular widget-in-focus in
other UI frameworks, because the ultimate widget in focus in Urwid depends
on the focus setting of all its parent container widgets.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">set_focus_path</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<p>is a method that assigns to the focus_position property of each container
along the path given by the list of positions <em>p</em>.  It may be used to restore
focus to a widget as returned by a previous call to <code class="docutils literal notranslate"><span class="pre">container.get_focus_path()</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">get_focus_widgets</span><span class="p">()</span>
</pre></div>
</div>
<p>is a method that returns the <code class="docutils literal notranslate"><span class="pre">.focus</span></code> values starting from this container
and proceeding along each child widget until reaching a leaf
(non-container) widget.</p>
<p>Note that the list does not contain the topmost container widget
(i.e., on which this method is called), but does include the
lowest leaf widget.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>
<span class="c1"># typically</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">container</span><span class="p">:</span> <span class="o">...</span>

<span class="n">container</span><span class="o">.</span><span class="fm">__reversed__</span><span class="p">()</span>
<span class="c1"># a.k.a</span>
<span class="nb">reversed</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
</pre></div>
</div>
<p>are methods that allow iteration over the <em>positions</em> of this container.
Normally the order of the positions generated by __reversed__() will be the
opposite of __iter__().  The exception is the case of <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> with
certain custom list walkers, and the reason goes back to the original way list
walker interface was defined.  Note that a custom list walker might also generate
an unbounded number of positions, so care should be used with this interface and
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>.</p>
<section id="pile-widgets">
<h3>Pile Widgets<a class="headerlink" href="#pile-widgets" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../reference/widget.html#urwid.Pile" title="urwid.Pile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pile</span></code></a> widgets are used to combine multiple widgets by stacking them vertically.
A Pile can manage selectable widgets by keeping track
of which widget is in focus and it can handle moving the focus between widgets
when the user presses the <em>UP</em> and <em>DOWN</em> keys.
A Pile will also work well when used within a <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>.</p>
<p>A Pile is selectable only if its focus widget is selectable. If you create a
Pile containing one Text widget and one Edit widget the Pile will choose the
Edit widget as its default focus widget.</p>
</section>
<section id="columns-widgets">
<h3>Columns Widgets<a class="headerlink" href="#columns-widgets" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../reference/widget.html#urwid.Columns" title="urwid.Columns"><code class="xref py py-class docutils literal notranslate"><span class="pre">Columns</span></code></a> widgets may be used to arrange either flow widgets,
box widgets or fixed widgets horizontally into columns.
Columns widgets will manage selectable widgets by keeping track of which column is in focus and it can
handle moving the focus between columns when the user presses the <em>LEFT</em> and <em>RIGHT</em> keys.
Columns widgets also work well when used within a <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>.</p>
<p>Columns widgets are selectable only if the column in focus is selectable.
If a focus column is not specified the first selectable widget will be chosen as the
focus column.</p>
</section>
<section id="gridflow-widgets">
<h3>GridFlow Widgets<a class="headerlink" href="#gridflow-widgets" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="../reference/widget.html#urwid.GridFlow" title="urwid.GridFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">GridFlow</span></code></a> widget is a fixed/flow widget designed for use
with <a class="reference internal" href="../reference/widget.html#urwid.Button" title="urwid.Button"><code class="xref py py-class docutils literal notranslate"><span class="pre">Button</span></code></a>, <a class="reference internal" href="../reference/widget.html#urwid.CheckBox" title="urwid.CheckBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckBox</span></code></a> and <a class="reference internal" href="../reference/widget.html#urwid.RadioButton" title="urwid.RadioButton"><code class="xref py py-class docutils literal notranslate"><span class="pre">RadioButton</span></code></a> widgets.
It renders all the widgets it contains the same width
and it arranges them from left to right and top to bottom.</p>
<p>The GridFlow widget uses Pile, Columns, Padding and Divider widgets to build a
display widget that will handle the keyboard input and rendering. When the
GridFlow widget is resized it regenerates the display widget to accommodate the
new space.</p>
</section>
<section id="overlay-widgets">
<h3>Overlay Widgets<a class="headerlink" href="#overlay-widgets" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="../reference/widget.html#urwid.Overlay" title="urwid.Overlay"><code class="xref py py-class docutils literal notranslate"><span class="pre">Overlay</span></code></a> widget is a box/flow/fixed widget that contains two other widgets.
The bottom widget is BOX rendered the full size of the Overlay widget
and the top widget is placed on top, obscuring an area of the bottom widget.
Widget sizing depends on the top widget sizing and sizing options.
This widget can be used to create effects such as overlapping “windows” or pop-up menus.</p>
<p>The Overlay widget always treats the top widget as the one in focus.
All keyboard input will be passed to the top widget.</p>
<p>If you want to use a flow widget for the bottom widget,
first wrap the flow widget with a <a class="reference internal" href="../reference/widget.html#urwid.Filler" title="urwid.Filler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filler</span></code></a> widget.</p>
</section>
</section>
<section id="scrollable-widgets">
<h2>Scrollable Widgets<a class="headerlink" href="#scrollable-widgets" title="Link to this heading">¶</a></h2>
<p>Scrollable widgets can scroll long content which normally not fit into the screen resolution.
Scrolling is normally supported using keyboard positioning keys and mouse wheel.</p>
<p>For scrolling is expected to be used <a class="reference internal" href="../reference/widget.html#urwid.ScrollBar" title="urwid.ScrollBar"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScrollBar</span></code></a> which accept any BOX widget supporting scrollable api.</p>
<section id="scrollbar-widget">
<h3>ScrollBar Widget<a class="headerlink" href="#scrollbar-widget" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="../reference/widget.html#urwid.ScrollBar" title="urwid.ScrollBar"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScrollBar</span></code></a> widget draw optional scrollbar on the right or left side of widget if scrolling is required
(widget not fit in the desired amount of rows).
The widget is always rendered BOX and wrapped widget is also should be BOX.
In case of other widget types, they should be wrapped to support BOX sizing.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/widget.html#urwid.Scrollable" title="urwid.Scrollable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scrollable</span></code></a> make any FLOW or FIXED widget compatible with scrollable api.</p></li>
<li><p><a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> can be used with <a class="reference internal" href="../reference/widget.html#urwid.ScrollBar" title="urwid.ScrollBar"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScrollBar</span></code></a> directly,
all input is always handled by <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> and it’s widgets.</p></li>
</ul>
<p>Keyboard positioning keys and mouse wheel is used for scrolling if not handled by the wrapped widget.
Scrolling is done on per-line basis.</p>
</section>
<section id="scrollable-widget">
<h3>Scrollable Widget<a class="headerlink" href="#scrollable-widget" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="../reference/widget.html#urwid.Scrollable" title="urwid.Scrollable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scrollable</span></code></a> widget is used to make  any FLOW or FIXED widget compatible with scrollable api by changing
target widget render and scrolling along full-size / columns defined sized widget.</p>
<p>Keyboard positioning keys and mouse wheel is used for scrolling if not handled by the wrapped widget.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="../reference/widget.html#urwid.Scrollable" title="urwid.Scrollable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scrollable</span></code></a> do not recognize if selectable wrapped widget part visible or not
if wrapped widget do not draw cursor.
This means, keyboard input maybe forwarded to the wrapped selectable widget even if it not visible.
<strong>Mouse input is not affected by this limitation</strong> due to known column and raw of mouse event.</p>
</div>
<p>Comparing to the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>,
<a class="reference internal" href="../reference/widget.html#urwid.Scrollable" title="urwid.Scrollable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scrollable</span></code></a> handles fixed and flow widgets directly instead of using list of small widgets.
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> should be used to scroll between widgets, which can be multiline by itself.</p>
</section>
<section id="scrollable-api">
<span id="id4"></span><h3>Scrollable API<a class="headerlink" href="#scrollable-api" title="Link to this heading">¶</a></h3>
<p>Widget pretending to be scrolled via <a class="reference internal" href="../reference/widget.html#urwid.ScrollBar" title="urwid.ScrollBar"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScrollBar</span></code></a> should subclass <a class="reference internal" href="../reference/widget.html#urwid.Widget" title="urwid.Widget"><code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span></code></a>
and implement positioning API:</p>
<dl class="py method">
<dt class="sig sig-object py" id="Scrollable.get_scrollpos">
<span class="sig-prename descclassname"><span class="pre">Scrollable.</span></span><span class="sig-name descname"><span class="pre">get_scrollpos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Scrollable.get_scrollpos" title="Link to this definition">¶</a></dt>
<dd><p>Get scrolling position</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>] </em><em>| </em><em>None</em>) – widget render size. If <cite>size</cite> is not given, the currently rendered number of rows is returned.</p></li>
<li><p><strong>focus</strong> (<em>bool</em>) – widget is focused</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the index of the first visible row.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Scrollable.set_scrollpos">
<span class="sig-prename descclassname"><span class="pre">Scrollable.</span></span><span class="sig-name descname"><span class="pre">set_scrollpos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">SupportsInt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Scrollable.set_scrollpos" title="Link to this definition">¶</a></dt>
<dd><p><strong>Optional</strong> method for setting scrolling position.</p>
<p>Method is called on mouse wheel scroll if it implemented and mouse event was not handled by widget.</p>
<p>If <cite>position</cite> is positive it is interpreted as lines from the top.
If <cite>position</cite> is negative it is interpreted as lines from the bottom.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Scrollable.rows_max">
<span class="sig-prename descclassname"><span class="pre">Scrollable.</span></span><span class="sig-name descname"><span class="pre">rows_max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Scrollable.rows_max" title="Link to this definition">¶</a></dt>
<dd><p>Get the total number of rows <cite>widget</cite> can render.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>] </em><em>| </em><em>None</em>) – widget render size. If <cite>size</cite> is not given, the currently rendered number of rows is returned.</p></li>
<li><p><strong>focus</strong> (<em>bool</em>) – widget is focused</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the number of rows for <cite>size</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="listbox-contents">
<span id="id5"></span><h2>ListBox Contents<a class="headerlink" href="#listbox-contents" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> is a box widget that contains flow widgets.
Its contents are displayed stacked vertically, and the
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> allows the user to scroll through its content.
One of the flow widgets displayed in the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> is its
focus widget.</p>
<section id="listbox-focus-and-scrolling">
<h3>ListBox Focus and Scrolling<a class="headerlink" href="#listbox-focus-and-scrolling" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> is a box widget that contains flow widgets.
Its contents are displayed stacked vertically, and the
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> allows the user to scroll through its content.
One of the flow widgets displayed in the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> is the
focus widget. The <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> passes key presses to the
focus widget to allow the user to interact with it. If the focus widget does
not handle a keypress then the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> may handle the
keypress by scrolling and/or selecting another widget to become the focus
widget.</p>
<p>The <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> tries to do the most sensible thing when
scrolling and changing focus. When the widgets displayed are all
<a class="reference internal" href="../reference/widget.html#urwid.Text" title="urwid.Text"><code class="xref py py-class docutils literal notranslate"><span class="pre">Text</span></code></a> widgets or other unselectable widgets then the
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> will behave like a web browser does when the
user presses <em>UP</em>, <em>DOWN</em>, <em>PAGE UP</em> and <em>PAGE DOWN</em>: new text is immediately
scrolled in from the top or bottom. The <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> chooses
one of the visible widgets as its focus widget when scrolling. When scrolling
up the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> chooses the topmost widget as the focus,
and when scrolling down the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> chooses the
bottommost widget as the focus.</p>
<p>The <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> remembers the location of the widget in
focus as either an “offset” or an “inset”. An offset is the number of rows
between the top of the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> and the beginning of the
focus widget. An offset of zero corresponds to a widget with its top aligned
with the top of the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>. An inset is the fraction
of rows of the focus widget that are “above” the top of the
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> and not visible. The
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> uses this method of remembering the focus
widget location so that when the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> is resized the
text displayed will stay roughly aligned with the top of the
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>.</p>
<p>When there are selectable widgets in the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> the
focus will move between the selectable widgets, skipping the unselectable
widgets. The <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> will try to scroll all the rows of
a selectable widget into view so that the user can see the new focus widget in
its entirety. This behavior can be used to bring more than a single widget into
view by using composite widgets to combine a selectable widget with other
widgets that should be displayed at the same time.</p>
</section>
<section id="dynamic-listbox-with-listwalker">
<h3>Dynamic ListBox with ListWalker<a class="headerlink" href="#dynamic-listbox-with-listwalker" title="Link to this heading">¶</a></h3>
<p>While the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> stores the location of its focus
widget, it does not directly store the actual focus widget or other contents of
the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>. The storage of a
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>’s content is delegated to a “List Walker”
object. If a list of widgets is passed to the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>
constructor then it creates a <a class="reference internal" href="../reference/list_walkers.html#urwid.SimpleListWalker" title="urwid.SimpleListWalker"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleListWalker</span></code></a> object
to manage the list.</p>
<p>When the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> is <a class="reference external" href=":meth:`ListBox.render`">rendering a canvas</a> or <a class="reference external" href=":meth:`ListBox.keypress`">handling
input</a> it will:</p>
<ol class="arabic simple">
<li><p>Call the <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_focus()</span></code> method of its list walker object. This method
will return the focus widget and a position object.</p></li>
<li><p>Optionally call the <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_prev()</span></code> method of its List Walker object one or
more times, initially passing the focus position and then passing the new
position returned on each successive call. This method will return the
widget and position object “above” the position passed.</p></li>
<li><p>Optionally call the <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_next()</span></code> method of its List Walker object one or
more times, similarly, to collect widgets and position objects “below” the
focus position.</p></li>
<li><p>Optionally call the <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_focus()</span></code> method passing one of the position
objects returned in the previous steps.</p></li>
</ol>
<p>This is the only way the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> accesses its contents,
and it will not store copies of any of the widgets or position objects beyond
the current rendering or input handling operation.</p>
<p>The <a class="reference internal" href="../reference/list_walkers.html#urwid.SimpleListWalker" title="urwid.SimpleListWalker"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleListWalker</span></code></a> stores a list of widgets, and uses
integer indexes into this list as its position objects. It stores the focus
position as an integer, so if you insert a widget into the list above the focus
position then you need to remember to increment the focus position in the
<a class="reference internal" href="../reference/list_walkers.html#urwid.SimpleListWalker" title="urwid.SimpleListWalker"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleListWalker</span></code></a> object or the contents of the
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> will shift.</p>
<p>A custom List Walker object may be passed to the
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> constructor instead of a plain list of widgets.
List Walker objects must implement the <a class="reference internal" href="#list-walker-interface"><span class="std std-ref">List Walker Interface</span></a>.</p>
<p>The <a class="reference external" href="https://github.com/urwid/urwid/blob/master/examples/fib.py">fib.py</a> example program demonstrates a custom list walker that doesn’t
store any widgets. It uses a tuple of two successive Fibonacci numbers as its
position objects and it generates Text widgets to display the numbers on the
fly. The result is a <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> that can scroll through an
unending list of widgets.</p>
<p>The <a class="reference external" href="https://github.com/urwid/urwid/blob/master/examples/edit.py">edit.py</a> example program demonstrates a custom list walker that loads lines
from a text file only as the user scrolls them into view. This allows even
huge files to be opened almost instantly.</p>
<p>The <a class="reference external" href="https://github.com/urwid/urwid/blob/master/examples/browse.py">browse.py</a> example program demonstrates a custom list walker that uses a
tuple of strings as position objects, one for the parent directory and one for
the file selected. The widgets are cached in a separate class that is accessed
using a dictionary indexed by parent directory names. This allows the
directories to be read only as required. The custom list walker also allows
directories to be hidden from view when they are “collapsed”.</p>
</section>
<section id="setting-the-focus">
<h3>Setting the Focus<a class="headerlink" href="#setting-the-focus" title="Link to this heading">¶</a></h3>
<p>The easiest way to change the current <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> focus is
to call the <a class="reference internal" href="../reference/widget.html#urwid.ListBox.set_focus" title="urwid.ListBox.set_focus"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ListBox.set_focus()</span></code></a> method. This method doesn’t
require that you know the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>’s current dimensions
<code class="docutils literal notranslate"><span class="pre">(maxcol,</span> <span class="pre">maxrow)</span></code>. It will wait until the next call to either keypress or
render to complete setting the offset and inset values using the dimensions
passed to that method.</p>
<p>The position object passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_focus()</span></code> must be compatible with the
List Walker object that the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> is using. For
<a class="reference internal" href="../reference/list_walkers.html#urwid.SimpleListWalker" title="urwid.SimpleListWalker"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleListWalker</span></code></a> the position is the integer index of
the widget within the list.</p>
<p>The <em>coming_from</em> parameter should be set if you know that the old position is
“above” or “below” the previous position. When the
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> completes setting the offset and inset values
it tries to find the old widget among the visible widgets. If the old widget is
still visible, if will try to avoid causing the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>
contents to scroll up or down from its previous position. If the widget is not
visible, then the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> will:</p>
<ul class="simple">
<li><p>Display the new focus at the bottom of the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> if
<em>coming_from</em> is “above”.</p></li>
<li><p>Display the new focus at the top of the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> if
<em>coming_from</em> is “below”.</p></li>
<li><p>Display the new focus in the middle of the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> if
coming_from is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
<p>If you know exactly where you want to display the new focus widget within the
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> you may call
<a class="reference internal" href="../reference/widget.html#urwid.ListBox.set_focus_valign" title="urwid.ListBox.set_focus_valign"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ListBox.set_focus_valign()</span></code></a>.  This method lets you specify
the <em>top</em>, <em>bottom</em>, <em>middle</em>, a relative position or the exact number of rows
from the top or bottom of the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>.</p>
</section>
<section id="list-walkers">
<h3>List Walkers<a class="headerlink" href="#list-walkers" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> does not manage the widgets it displays
directly, instead it passes that task to a class called a “list walker”. List
walkers keep track of the widget in focus and provide an opaque position object
that the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> may use to iterate through widgets
above and below the focus widget.</p>
<p>A <a class="reference internal" href="../reference/list_walkers.html#urwid.SimpleFocusListWalker" title="urwid.SimpleFocusListWalker"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleFocusListWalker</span></code></a>
is a list walker that behaves like a normal Python list. It may be used any
time you will be displaying a moderate number of widgets.</p>
<p>If you need to display a large number of widgets you should implement your own
list walker that manages creating widgets as they are requested and destroying
them later to avoid excessive memory use.</p>
<p>List walkers may also be used to display tree or other structures within a
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>. A number of the <a class="reference external" href="http://excess.org/urwid/examples.html">example programs</a> demonstrate the use of custom list
walker classes.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../reference/list_walkers.html#urwid.ListWalker" title="urwid.ListWalker"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListWalker</span> <span class="pre">base</span> <span class="pre">class</span> <span class="pre">reference</span></code></a></p>
</div>
</section>
<section id="list-walker-interface">
<span id="id6"></span><h3>List Walker Interface<a class="headerlink" href="#list-walker-interface" title="Link to this heading">¶</a></h3>
<section id="list-walker-api-version-1">
<h4>List Walker API Version 1<a class="headerlink" href="#list-walker-api-version-1" title="Link to this heading">¶</a></h4>
<p>This API will remain available and is still the least restrictive option fo the programmer.
Your class should subclass <a class="reference internal" href="../reference/list_walkers.html#urwid.ListWalker" title="urwid.ListWalker"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListWalker</span></code></a>.
Whenever the focus or content changes you are responsible for calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">ListWalker._modified()</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="MyV1ListWalker.get_focus">
<span class="sig-prename descclassname"><span class="pre">MyV1ListWalker.</span></span><span class="sig-name descname"><span class="pre">get_focus</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#MyV1ListWalker.get_focus" title="Link to this definition">¶</a></dt>
<dd><p>return a <code class="docutils literal notranslate"><span class="pre">(widget,</span> <span class="pre">position)</span></code> tuple or <code class="docutils literal notranslate"><span class="pre">(None,</span> <span class="pre">None)</span></code> if empty</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MyV1ListWalker.set_focus">
<span class="sig-prename descclassname"><span class="pre">MyV1ListWalker.</span></span><span class="sig-name descname"><span class="pre">set_focus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MyV1ListWalker.set_focus" title="Link to this definition">¶</a></dt>
<dd><p>set the focus and call <code class="docutils literal notranslate"><span class="pre">self._modified()</span></code> or raise an <code class="xref py py-exc docutils literal notranslate"><span class="pre">IndexError</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MyV1ListWalker.get_next">
<span class="sig-prename descclassname"><span class="pre">MyV1ListWalker.</span></span><span class="sig-name descname"><span class="pre">get_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MyV1ListWalker.get_next" title="Link to this definition">¶</a></dt>
<dd><p>return the <code class="docutils literal notranslate"><span class="pre">(widget,</span> <span class="pre">position)</span></code> tuple below <em>position</em> passed
or <code class="docutils literal notranslate"><span class="pre">(None,</span> <span class="pre">None)</span></code> if there is none.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MyV1ListWalker.get_prev">
<span class="sig-prename descclassname"><span class="pre">MyV1ListWalker.</span></span><span class="sig-name descname"><span class="pre">get_prev</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MyV1ListWalker.get_prev" title="Link to this definition">¶</a></dt>
<dd><p>return the <code class="docutils literal notranslate"><span class="pre">(widget,</span> <span class="pre">position)</span></code> tuple above <em>position</em> passed
or <code class="docutils literal notranslate"><span class="pre">(None,</span> <span class="pre">None)</span></code> if there is none.</p>
</dd></dl>

</section>
<section id="list-walker-api-version-2">
<h4>List Walker API Version 2<a class="headerlink" href="#list-walker-api-version-2" title="Link to this heading">¶</a></h4>
<p>This API is an attempt to remove some of the duplicate code that V1 requires for
many users.  List walker API V1 will be implemented automatically by
subclassing <code class="xref py py-class docutils literal notranslate"><span class="pre">ListWalker</span></code> and implementing the V2 methods.
Whenever the focus or content changes you are responsible for
calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">ListWalker._modified()</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="MyV2ListWalker.__getitem__">
<span class="sig-prename descclassname"><span class="pre">MyV2ListWalker.</span></span><span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MyV2ListWalker.__getitem__" title="Link to this definition">¶</a></dt>
<dd><p>return widget at <em>position</em> or raise an <code class="xref py py-exc docutils literal notranslate"><span class="pre">IndexError</span></code> or <code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MyV2ListWalker.next_position">
<span class="sig-prename descclassname"><span class="pre">MyV2ListWalker.</span></span><span class="sig-name descname"><span class="pre">next_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MyV2ListWalker.next_position" title="Link to this definition">¶</a></dt>
<dd><p>return the position below passed <em>position</em> or raise an <code class="xref py py-exc docutils literal notranslate"><span class="pre">IndexError</span></code> or <code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MyV2ListWalker.prev_position">
<span class="sig-prename descclassname"><span class="pre">MyV2ListWalker.</span></span><span class="sig-name descname"><span class="pre">prev_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MyV2ListWalker.prev_position" title="Link to this definition">¶</a></dt>
<dd><p>return the position above passed <em>position</em> or raise an <code class="xref py py-exc docutils literal notranslate"><span class="pre">IndexError</span></code> or <code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MyV2ListWalker.set_focus">
<span class="sig-prename descclassname"><span class="pre">MyV2ListWalker.</span></span><span class="sig-name descname"><span class="pre">set_focus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MyV2ListWalker.set_focus" title="Link to this definition">¶</a></dt>
<dd><p>set the focus and call <code class="docutils literal notranslate"><span class="pre">self._modified()</span></code> or raise an <code class="xref py py-exc docutils literal notranslate"><span class="pre">IndexError</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="MyV2ListWalker.focus">
<span class="sig-prename descclassname"><span class="pre">MyV2ListWalker.</span></span><span class="sig-name descname"><span class="pre">focus</span></span><a class="headerlink" href="#MyV2ListWalker.focus" title="Link to this definition">¶</a></dt>
<dd><p>attribute or property containing the focus position, or define
<a class="reference internal" href="#MyV1ListWalker.get_focus" title="MyV1ListWalker.get_focus"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MyV1ListWalker.get_focus()</span></code></a> as above</p>
</dd></dl>

</section>
<section id="list-walker-iteration">
<h4>List Walker Iteration<a class="headerlink" href="#list-walker-iteration" title="Link to this heading">¶</a></h4>
<p>There is an optional iteration helper method that may be defined in any list walker.
When this is defined it will be used by <code class="xref py py-meth docutils literal notranslate"><span class="pre">ListBox.__iter__()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">ListBox.__reversed__()</span></code>:</p>
<dl class="py method">
<dt class="sig sig-object py" id="MyV2ListWalker.positions">
<span class="sig-prename descclassname"><span class="pre">MyV2ListWalker.</span></span><span class="sig-name descname"><span class="pre">positions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MyV2ListWalker.positions" title="Link to this definition">¶</a></dt>
<dd><p>return a forward or reverse iterable of positions</p>
</dd></dl>

</section>
</section>
</section>
<section id="custom-widgets">
<h2>Custom Widgets<a class="headerlink" href="#custom-widgets" title="Link to this heading">¶</a></h2>
<p>Widgets in Urwid are easiest to create by extending other widgets. If you are
making a new type of widget that can use other widgets to display its content,
like a new type of button or control, then you should start by extending
<a class="reference internal" href="../reference/widget.html#urwid.WidgetWrap" title="urwid.WidgetWrap"><code class="xref py py-class docutils literal notranslate"><span class="pre">WidgetWrap</span></code></a> and passing the display widget to its constructor.</p>
<p>The <a class="reference internal" href="../reference/widget.html#urwid.Widget" title="urwid.Widget"><code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span></code></a> interface is described in detail in the
<a class="reference internal" href="../reference/widget.html#urwid.Widget" title="urwid.Widget"><code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span> <span class="pre">base</span> <span class="pre">class</span> <span class="pre">reference</span></code></a> and is useful if you’re looking to modify
the behavior of an existing widget,
build a new widget class from scratch or just want a better understanding of
the library.</p>
<p>One Urwid design choice that stands out is that widgets typically have no
size. Widgets don’t store their size on screen, and instead are
passed that information when they need it.</p>
<p>This choice has some advantages:</p>
<ul class="simple">
<li><p>widgets may be reused in different locations</p></li>
<li><p>reused widgets only need to be rendered once per size displayed</p></li>
<li><p>widgets don’t need to know their parents</p></li>
<li><p>less data to store and update</p></li>
<li><p>no worrying about widgets that haven’t received their size yet</p></li>
<li><p>same widgets could be displayed at different sizes to different users
simultaneously</p></li>
</ul>
<p>It also has disadvantages:</p>
<ul class="simple">
<li><p>difficult to determine a widget’s size on screen</p></li>
<li><p>more parameters to parse</p></li>
<li><p>duplicated size calculations across methods</p></li>
</ul>
<p>For determining a widget’s size on screen it is possible to look up the size(s)
it was rendered at in the <a class="reference internal" href="../reference/canvas.html#urwid.CanvasCache" title="urwid.CanvasCache"><code class="xref py py-class docutils literal notranslate"><span class="pre">CanvasCache</span></code></a>. There are plans
to address some of the duplicated size handling code in the container widgets
in a future Urwid release.</p>
<p>The same holds true for a widget’s focus state, so that too is passed in to
functions that need it.</p>
<section id="modifying-existing-widgets">
<h3>Modifying Existing Widgets<a class="headerlink" href="#modifying-existing-widgets" title="Link to this heading">¶</a></h3>
<p>The easiest way to create a custom widget is to modify an existing widget.
This can be done by either subclassing the original widget or by wrapping it.
Subclassing is appropriate when you need to interact at a very low level with
the original widget, such as if you are creating a custom edit widget with
different behavior than the usual Edit widgets. If you are creating a custom
widget that doesn’t need tight coupling with the original widget then
wrapping is more appropriate.</p>
<p>The <a class="reference internal" href="../reference/widget.html#urwid.WidgetWrap" title="urwid.WidgetWrap"><code class="xref py py-class docutils literal notranslate"><span class="pre">WidgetWrap</span></code></a> class simplifies wrapping existing
widgets. You can create a custom widget simply by creating a subclass of
WidgetWrap and passing a widget into WidgetWrap’s constructor.</p>
<p>This is an example of a custom widget that uses WidgetWrap:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">urwid</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">class</span> <span class="nc">QuestionnaireItem</span><span class="p">(</span><span class="n">urwid</span><span class="o">.</span><span class="n">WidgetWrap</span><span class="p">[</span><span class="n">urwid</span><span class="o">.</span><span class="n">GridFlow</span><span class="p">]):</span>
<span class="linenos"> 7</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 8</span>        <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">urwid</span><span class="o">.</span><span class="n">RadioButton</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos"> 9</span>        <span class="n">unsure</span> <span class="o">=</span> <span class="n">urwid</span><span class="o">.</span><span class="n">RadioButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">,</span> <span class="s2">&quot;Unsure&quot;</span><span class="p">)</span>
<span class="linenos">10</span>        <span class="n">yes</span> <span class="o">=</span> <span class="n">urwid</span><span class="o">.</span><span class="n">RadioButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">,</span> <span class="s2">&quot;Yes&quot;</span><span class="p">)</span>
<span class="linenos">11</span>        <span class="n">no</span> <span class="o">=</span> <span class="n">urwid</span><span class="o">.</span><span class="n">RadioButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">,</span> <span class="s2">&quot;No&quot;</span><span class="p">)</span>
<span class="linenos">12</span>        <span class="n">display_widget</span> <span class="o">=</span> <span class="n">urwid</span><span class="o">.</span><span class="n">GridFlow</span><span class="p">([</span><span class="n">unsure</span><span class="p">,</span> <span class="n">yes</span><span class="p">,</span> <span class="n">no</span><span class="p">],</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">)</span>
<span class="linenos">13</span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">display_widget</span><span class="p">)</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="k">def</span> <span class="nf">get_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">label</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="k">if</span> <span class="n">o</span><span class="o">.</span><span class="n">state</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code creates a group of RadioButtons and provides a method to
query the state of the buttons.</p>
</section>
<section id="widgets-from-scratch">
<h3>Widgets from Scratch<a class="headerlink" href="#widgets-from-scratch" title="Link to this heading">¶</a></h3>
<p>Widgets must inherit from <a class="reference internal" href="../reference/widget.html#urwid.Widget" title="urwid.Widget"><code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span></code></a>.
Box widgets must implement <a class="reference internal" href="../reference/widget.html#urwid.Widget.selectable" title="urwid.Widget.selectable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.selectable()</span></code></a> and <a class="reference internal" href="../reference/widget.html#urwid.Widget.render" title="urwid.Widget.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.render()</span></code></a>
methods, and flow widgets must implement <a class="reference internal" href="../reference/widget.html#urwid.Widget.selectable" title="urwid.Widget.selectable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.selectable()</span></code></a>,
<a class="reference internal" href="../reference/widget.html#urwid.Widget.render" title="urwid.Widget.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.render()</span></code></a> and <a class="reference internal" href="../reference/widget.html#urwid.Widget.rows" title="urwid.Widget.rows"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.rows()</span></code></a> methods.</p>
<p>The default <a class="reference internal" href="../reference/widget.html#urwid.Widget.sizing" title="urwid.Widget.sizing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.sizing()</span></code></a> method returns a set of sizing modes supported
from <code class="docutils literal notranslate"><span class="pre">self._sizing</span></code>, so we define <code class="docutils literal notranslate"><span class="pre">_sizing</span></code> attributes for our flow and
box widgets below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">urwid</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">class</span> <span class="nc">Pudding</span><span class="p">(</span><span class="n">urwid</span><span class="o">.</span><span class="n">Widget</span><span class="p">):</span>
<span class="linenos"> 7</span>    <span class="n">_sizing</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">((</span><span class="n">urwid</span><span class="o">.</span><span class="n">FLOW</span><span class="p">,))</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>    <span class="k">def</span> <span class="nf">rows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">focus</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="linenos">10</span>        <span class="k">return</span> <span class="mi">1</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">focus</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">urwid</span><span class="o">.</span><span class="n">TextCanvas</span><span class="p">:</span>
<span class="linenos">13</span>        <span class="p">(</span><span class="n">maxcol</span><span class="p">,)</span> <span class="o">=</span> <span class="n">size</span>
<span class="linenos">14</span>        <span class="n">num_pudding</span> <span class="o">=</span> <span class="n">maxcol</span> <span class="o">//</span> <span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Pudding&quot;</span><span class="p">)</span>
<span class="linenos">15</span>        <span class="k">return</span> <span class="n">urwid</span><span class="o">.</span><span class="n">TextCanvas</span><span class="p">([</span><span class="sa">b</span><span class="s2">&quot;Pudding&quot;</span> <span class="o">*</span> <span class="n">num_pudding</span><span class="p">],</span> <span class="n">maxcol</span><span class="o">=</span><span class="n">maxcol</span><span class="p">)</span>
<span class="linenos">16</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="k">class</span> <span class="nc">BoxPudding</span><span class="p">(</span><span class="n">urwid</span><span class="o">.</span><span class="n">Widget</span><span class="p">):</span>
<span class="linenos">19</span>    <span class="n">_sizing</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">((</span><span class="n">urwid</span><span class="o">.</span><span class="n">BOX</span><span class="p">,))</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">focus</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">urwid</span><span class="o">.</span><span class="n">TextCanvas</span><span class="p">:</span>
<span class="linenos">22</span>        <span class="p">(</span><span class="n">maxcol</span><span class="p">,</span> <span class="n">maxrow</span><span class="p">)</span> <span class="o">=</span> <span class="n">size</span>
<span class="linenos">23</span>        <span class="n">num_pudding</span> <span class="o">=</span> <span class="n">maxcol</span> <span class="o">//</span> <span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Pudding&quot;</span><span class="p">)</span>
<span class="linenos">24</span>        <span class="k">return</span> <span class="n">urwid</span><span class="o">.</span><span class="n">TextCanvas</span><span class="p">([</span><span class="sa">b</span><span class="s2">&quot;Pudding&quot;</span> <span class="o">*</span> <span class="n">num_pudding</span><span class="p">]</span> <span class="o">*</span> <span class="n">maxrow</span><span class="p">,</span> <span class="n">maxcol</span><span class="o">=</span><span class="n">maxcol</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code implements two widget classes. Pudding is a flow widget and
BoxPudding is a box widget. Pudding will render as much “Pudding” as will fit
in a single row, and BoxPudding will render as much “Pudding” as will fit into
the entire area given.</p>
<p>Note that the rows and render methods’ focus parameter must have a default
value of False. Also note that for flow widgets the number of rows returned by
the rows method must match the number of rows rendered by the render method.</p>
<p>To improve the efficiency of your Urwid application you should be careful of
how long your <code class="docutils literal notranslate"><span class="pre">rows()</span></code> methods take to execute. The <code class="docutils literal notranslate"><span class="pre">rows()</span></code> methods may be called many
times as part of input handling and rendering operations. If you are using a
display widget that is time consuming to create you should consider caching it
to reduce its impact on performance.</p>
<p>It is possible to create a widget that will behave as either a flow widget or
box widget depending on what is required:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">urwid</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">class</span> <span class="nc">MultiPudding</span><span class="p">(</span><span class="n">urwid</span><span class="o">.</span><span class="n">Widget</span><span class="p">):</span>
<span class="linenos"> 7</span>    <span class="n">_sizing</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">((</span><span class="n">urwid</span><span class="o">.</span><span class="n">FLOW</span><span class="p">,</span> <span class="n">urwid</span><span class="o">.</span><span class="n">BOX</span><span class="p">))</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>    <span class="k">def</span> <span class="nf">rows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">focus</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="linenos">10</span>        <span class="k">return</span> <span class="mi">1</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">focus</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">urwid</span><span class="o">.</span><span class="n">TextCanvas</span><span class="p">:</span>
<span class="linenos">13</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">14</span>            <span class="p">(</span><span class="n">maxcol</span><span class="p">,)</span> <span class="o">=</span> <span class="n">size</span>
<span class="linenos">15</span>            <span class="n">maxrow</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">16</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">17</span>            <span class="p">(</span><span class="n">maxcol</span><span class="p">,</span> <span class="n">maxrow</span><span class="p">)</span> <span class="o">=</span> <span class="n">size</span>
<span class="linenos">18</span>        <span class="n">num_pudding</span> <span class="o">=</span> <span class="n">maxcol</span> <span class="o">//</span> <span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Pudding&quot;</span><span class="p">)</span>
<span class="linenos">19</span>        <span class="k">return</span> <span class="n">urwid</span><span class="o">.</span><span class="n">TextCanvas</span><span class="p">([</span><span class="sa">b</span><span class="s2">&quot;Pudding&quot;</span> <span class="o">*</span> <span class="n">num_pudding</span><span class="p">]</span> <span class="o">*</span> <span class="n">maxrow</span><span class="p">,</span> <span class="n">maxcol</span><span class="o">=</span><span class="n">maxcol</span><span class="p">)</span>
</pre></div>
</div>
<p>MultiPudding will work in place of either Pudding or BoxPudding above. The
number of elements in the size tuple determines whether the containing widget
is expecting a flow widget or a box widget.</p>
</section>
<section id="selectable-widgets">
<h3>Selectable Widgets<a class="headerlink" href="#selectable-widgets" title="Link to this heading">¶</a></h3>
<p>Selectable widgets such as Edit and Button widgets allow the user to interact
with the application. A widget is selectable if its selectable method returns
True. Selectable widgets must implement the <a class="reference internal" href="../reference/widget.html#urwid.Widget.keypress" title="urwid.Widget.keypress"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.keypress()</span></code></a> method to
handle keyboard input.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">urwid</span>


<span class="k">class</span> <span class="nc">SelectablePudding</span><span class="p">(</span><span class="n">urwid</span><span class="o">.</span><span class="n">Widget</span><span class="p">):</span>
    <span class="n">_sizing</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">((</span><span class="n">urwid</span><span class="o">.</span><span class="n">FLOW</span><span class="p">,))</span>
    <span class="n">_selectable</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pudding</span> <span class="o">=</span> <span class="s2">&quot;pudding&quot;</span>

    <span class="k">def</span> <span class="nf">rows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">focus</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">focus</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">urwid</span><span class="o">.</span><span class="n">TextCanvas</span><span class="p">:</span>
        <span class="p">(</span><span class="n">maxcol</span><span class="p">,)</span> <span class="o">=</span> <span class="n">size</span>
        <span class="n">num_pudding</span> <span class="o">=</span> <span class="n">maxcol</span> <span class="o">//</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pudding</span><span class="p">)</span>
        <span class="n">pudding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pudding</span>
        <span class="k">if</span> <span class="n">focus</span><span class="p">:</span>
            <span class="n">pudding</span> <span class="o">=</span> <span class="n">pudding</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">urwid</span><span class="o">.</span><span class="n">TextCanvas</span><span class="p">([</span><span class="n">pudding</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">num_pudding</span><span class="p">],</span> <span class="n">maxcol</span><span class="o">=</span><span class="n">maxcol</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">keypress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">key</span>

        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pudding</span><span class="p">:</span>
            <span class="c1"># remove letter from pudding</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pudding</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pudding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pudding</span><span class="p">[:</span><span class="n">n</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pudding</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pudding</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pudding</span> <span class="o">=</span> <span class="s2">&quot;pudding&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_invalidate</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">key</span>
</pre></div>
</div>
<p>The SelectablePudding widget will display its contents in uppercase when it is
in focus, and it allows the user to “eat” the pudding by pressing each of the
letters <em>P</em>, <em>U</em>, <em>D</em>, <em>D</em>, <em>I</em>, <em>N</em> and <em>G</em> on the keyboard. When the user has
“eaten” all the pudding the widget will reset to its initial state.</p>
<p>Note that keys that are unhandled in the keypress method are returned so that
another widget may be able to handle them. This is a good convention to follow
unless you have a very good reason not to. In this case the <em>UP</em> and <em>DOWN</em>
keys are returned so that if this widget is in a
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> the <a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> will behave
as the user expects and change the focus or scroll the
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a>.</p>
</section>
<section id="widget-displaying-the-cursor">
<h3>Widget Displaying the Cursor<a class="headerlink" href="#widget-displaying-the-cursor" title="Link to this heading">¶</a></h3>
<p>Widgets that display the cursor must implement the
<a class="reference internal" href="../reference/widget.html#urwid.Widget.get_cursor_coords" title="urwid.Widget.get_cursor_coords"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.get_cursor_coords()</span></code></a> method.
Similar to the rows method for flow widgets, this method lets other widgets
make layout decisions without rendering the entire widget. The
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> widget in particular uses get_cursor_coords to
make sure that the cursor is visible within its focus widget.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">urwid</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">class</span> <span class="nc">CursorPudding</span><span class="p">(</span><span class="n">urwid</span><span class="o">.</span><span class="n">Widget</span><span class="p">):</span>
<span class="linenos"> 7</span>    <span class="n">_sizing</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">([</span><span class="s2">&quot;flow&quot;</span><span class="p">])</span>
<span class="linenos"> 8</span>    <span class="n">_selectable</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">11</span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="linenos">12</span>        <span class="bp">self</span><span class="o">.</span><span class="n">cursor_col</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">13</span>
<span class="linenos">14</span>    <span class="k">def</span> <span class="nf">rows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">focus</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="k">return</span> <span class="mi">1</span>
<span class="linenos">16</span>
<span class="linenos">17</span>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">focus</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">urwid</span><span class="o">.</span><span class="n">TextCanvas</span><span class="p">:</span>
<span class="linenos">18</span>        <span class="p">(</span><span class="n">maxcol</span><span class="p">,)</span> <span class="o">=</span> <span class="n">size</span>
<span class="linenos">19</span>        <span class="n">num_pudding</span> <span class="o">=</span> <span class="n">maxcol</span> <span class="o">//</span> <span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Pudding&quot;</span><span class="p">)</span>
<span class="linenos">20</span>        <span class="n">cursor</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">21</span>        <span class="k">if</span> <span class="n">focus</span><span class="p">:</span>
<span class="linenos">22</span>            <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cursor_coords</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
<span class="linenos">23</span>        <span class="k">return</span> <span class="n">urwid</span><span class="o">.</span><span class="n">TextCanvas</span><span class="p">([</span><span class="sa">b</span><span class="s2">&quot;Pudding&quot;</span> <span class="o">*</span> <span class="n">num_pudding</span><span class="p">],</span> <span class="p">[],</span> <span class="n">cursor</span><span class="o">=</span><span class="n">cursor</span><span class="p">,</span> <span class="n">maxcol</span><span class="o">=</span><span class="n">maxcol</span><span class="p">)</span>
<span class="linenos">24</span>
<span class="linenos">25</span>    <span class="k">def</span> <span class="nf">get_cursor_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="linenos">26</span>        <span class="p">(</span><span class="n">maxcol</span><span class="p">,)</span> <span class="o">=</span> <span class="n">size</span>
<span class="linenos">27</span>        <span class="n">col</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cursor_col</span><span class="p">,</span> <span class="n">maxcol</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">28</span>        <span class="k">return</span> <span class="n">col</span><span class="p">,</span> <span class="mi">0</span>
<span class="linenos">29</span>
<span class="linenos">30</span>    <span class="k">def</span> <span class="nf">keypress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">31</span>        <span class="p">(</span><span class="n">maxcol</span><span class="p">,)</span> <span class="o">=</span> <span class="n">size</span>
<span class="linenos">32</span>        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
<span class="linenos">33</span>            <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor_col</span> <span class="o">-</span> <span class="mi">1</span>
<span class="linenos">34</span>        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
<span class="linenos">35</span>            <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor_col</span> <span class="o">+</span> <span class="mi">1</span>
<span class="linenos">36</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">37</span>            <span class="k">return</span> <span class="n">key</span>
<span class="linenos">38</span>        <span class="bp">self</span><span class="o">.</span><span class="n">cursor_x</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">maxcol</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">))</span>
<span class="linenos">39</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_invalidate</span><span class="p">()</span>
<span class="linenos">40</span>        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
<p>CursorPudding will let the user move the cursor through the widget by pressing
<em>LEFT</em> and <em>RIGHT</em>. The cursor must only be added to the canvas when the widget
is in focus. The get_cursor_coords method must always return the same cursor
coordinates that render does.</p>
<p>A widget displaying a cursor may choose to implement <a class="reference internal" href="../reference/widget.html#urwid.Widget.get_pref_col" title="urwid.Widget.get_pref_col"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.get_pref_col()</span></code></a>.
This method
returns the preferred column for the cursor, and is called when the focus is
moving up or down off this widget.</p>
<p>Another optional method is <a class="reference internal" href="../reference/widget.html#urwid.Widget.move_cursor_to_coords" title="urwid.Widget.move_cursor_to_coords"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.move_cursor_to_coords()</span></code></a>. This method allows other
widgets to try to position the cursor within this widget. The
<a class="reference internal" href="../reference/widget.html#urwid.ListBox" title="urwid.ListBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListBox</span></code></a> widget uses <a class="reference internal" href="../reference/widget.html#urwid.Widget.move_cursor_to_coords" title="urwid.Widget.move_cursor_to_coords"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Widget.move_cursor_to_coords()</span></code></a> when
changing focus and when the user pressed <em>PAGE UP</em> or <em>PAGE DOWN</em>. This method
must return <code class="docutils literal notranslate"><span class="pre">True</span></code> on success and <code class="docutils literal notranslate"><span class="pre">False</span></code> on failure. If the cursor may be
placed at any position within the row specified (not only at the exact column
specified) then this method must move the cursor to that position and return
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>    <span class="k">def</span> <span class="nf">get_pref_col</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="linenos">2</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor_x</span>
<span class="linenos">3</span>
<span class="linenos">4</span>    <span class="k">def</span> <span class="nf">move_cursor_to_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">col</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">row</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">5</span>        <span class="k">assert</span> <span class="n">row</span> <span class="o">==</span> <span class="mi">0</span>  <span class="c1"># noqa: S101  # in examples we can use `assert`</span>
<span class="linenos">6</span>        <span class="bp">self</span><span class="o">.</span><span class="n">cursor_x</span> <span class="o">=</span> <span class="n">col</span>
<span class="linenos">7</span>        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
</section>
<section id="widget-metaclass">
<h2>Widget Metaclass<a class="headerlink" href="#widget-metaclass" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="../reference/widget.html#urwid.Widget" title="urwid.Widget"><code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span></code></a> base class has a metaclass defined that
creates a <code class="docutils literal notranslate"><span class="pre">__super</span></code> attribute for calling your superclass:
<code class="docutils literal notranslate"><span class="pre">self.__super</span></code> is the same as the usual <code class="docutils literal notranslate"><span class="pre">super(MyClassName,</span> <span class="pre">self)</span></code>.
This shortcut is of little use with Python 3’s new <code class="docutils literal notranslate"><span class="pre">super()</span></code> syntax, but
will likely be retained for backwards compatibility in future versions.</p>
<p>This metaclass also uses <code class="xref py py-class docutils literal notranslate"><span class="pre">MetaSignal</span></code>
to allow signals to be defined as a list of signal names
in a <code class="docutils literal notranslate"><span class="pre">signals</span></code> class attribute.  This is equivalent to calling
<a class="reference internal" href="../reference/signals.html#urwid.register_signal" title="urwid.register_signal"><code class="xref py py-func docutils literal notranslate"><span class="pre">register_signal()</span></code></a> with the class name and list of signals and all those
defined in superclasses after the class definition.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../reference/meta.html#urwid.WidgetMeta" title="urwid.WidgetMeta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span> <span class="pre">metaclass</span> <span class="pre">WidgetMeta</span></code></a></p>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/urwid-logo.png" alt="Logo"/>
            </a></p><h3>Table of contents</h3>
    <ul><li><a href="index.html">Manual</a></li><ul>
<li><a class="reference internal" href="#">Widgets</a><ul>
<li><a class="reference internal" href="#widget-layout">Widget Layout</a></li>
<li><a class="reference internal" href="#box-flow-and-fixed-widgets">Box, Flow and Fixed Widgets</a></li>
<li><a class="reference internal" href="#included-widgets">Included Widgets</a></li>
<li><a class="reference internal" href="#decoration-widgets">Decoration Widgets</a></li>
<li><a class="reference internal" href="#container-widgets">Container Widgets</a><ul>
<li><a class="reference internal" href="#pile-widgets">Pile Widgets</a></li>
<li><a class="reference internal" href="#columns-widgets">Columns Widgets</a></li>
<li><a class="reference internal" href="#gridflow-widgets">GridFlow Widgets</a></li>
<li><a class="reference internal" href="#overlay-widgets">Overlay Widgets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scrollable-widgets">Scrollable Widgets</a><ul>
<li><a class="reference internal" href="#scrollbar-widget">ScrollBar Widget</a></li>
<li><a class="reference internal" href="#scrollable-widget">Scrollable Widget</a></li>
<li><a class="reference internal" href="#scrollable-api">Scrollable API</a><ul>
<li><a class="reference internal" href="#Scrollable.get_scrollpos"><code class="docutils literal notranslate"><span class="pre">get_scrollpos()</span></code></a></li>
<li><a class="reference internal" href="#Scrollable.set_scrollpos"><code class="docutils literal notranslate"><span class="pre">set_scrollpos()</span></code></a></li>
<li><a class="reference internal" href="#Scrollable.rows_max"><code class="docutils literal notranslate"><span class="pre">rows_max()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#listbox-contents">ListBox Contents</a><ul>
<li><a class="reference internal" href="#listbox-focus-and-scrolling">ListBox Focus and Scrolling</a></li>
<li><a class="reference internal" href="#dynamic-listbox-with-listwalker">Dynamic ListBox with ListWalker</a></li>
<li><a class="reference internal" href="#setting-the-focus">Setting the Focus</a></li>
<li><a class="reference internal" href="#list-walkers">List Walkers</a></li>
<li><a class="reference internal" href="#list-walker-interface">List Walker Interface</a><ul>
<li><a class="reference internal" href="#list-walker-api-version-1">List Walker API Version 1</a><ul>
<li><a class="reference internal" href="#MyV1ListWalker.get_focus"><code class="docutils literal notranslate"><span class="pre">get_focus()</span></code></a></li>
<li><a class="reference internal" href="#MyV1ListWalker.set_focus"><code class="docutils literal notranslate"><span class="pre">set_focus()</span></code></a></li>
<li><a class="reference internal" href="#MyV1ListWalker.get_next"><code class="docutils literal notranslate"><span class="pre">get_next()</span></code></a></li>
<li><a class="reference internal" href="#MyV1ListWalker.get_prev"><code class="docutils literal notranslate"><span class="pre">get_prev()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-walker-api-version-2">List Walker API Version 2</a><ul>
<li><a class="reference internal" href="#MyV2ListWalker.__getitem__"><code class="docutils literal notranslate"><span class="pre">__getitem__()</span></code></a></li>
<li><a class="reference internal" href="#MyV2ListWalker.next_position"><code class="docutils literal notranslate"><span class="pre">next_position()</span></code></a></li>
<li><a class="reference internal" href="#MyV2ListWalker.prev_position"><code class="docutils literal notranslate"><span class="pre">prev_position()</span></code></a></li>
<li><a class="reference internal" href="#MyV2ListWalker.set_focus"><code class="docutils literal notranslate"><span class="pre">set_focus()</span></code></a></li>
<li><a class="reference internal" href="#MyV2ListWalker.focus"><code class="docutils literal notranslate"><span class="pre">focus</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-walker-iteration">List Walker Iteration</a><ul>
<li><a class="reference internal" href="#MyV2ListWalker.positions"><code class="docutils literal notranslate"><span class="pre">positions()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#custom-widgets">Custom Widgets</a><ul>
<li><a class="reference internal" href="#modifying-existing-widgets">Modifying Existing Widgets</a></li>
<li><a class="reference internal" href="#widgets-from-scratch">Widgets from Scratch</a></li>
<li><a class="reference internal" href="#selectable-widgets">Selectable Widgets</a></li>
<li><a class="reference internal" href="#widget-displaying-the-cursor">Widget Displaying the Cursor</a></li>
</ul>
</li>
<li><a class="reference internal" href="#widget-metaclass">Widget Metaclass</a></li>
</ul>
</li>
</ul>

    </ul>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="displaymodules.html"
                          title="previous chapter">Display Modules</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="userinput.html"
                          title="next chapter">User Input</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/manual/widgets.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="userinput.html" title="User Input"
             >next</a> |</li>
        <li class="right" >
          <a href="displaymodules.html" title="Display Modules"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Urwid 2.6.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Urwid Manual</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Widgets</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2014, Ian Ward et al.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>